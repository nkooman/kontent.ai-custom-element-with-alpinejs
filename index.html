<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Domain Alias Configurator</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./index.css" />
</head>

<body>
  <svg style="position: absolute; width: 0; height: 0; overflow: hidden">
    <defs>
      <symbol id="confirm" width="16" height="16" viewBox="4 -64 65 56" xmlns="http://www.w3.org/2000/svg">
        <path d="M66.7266-62.3672L66.7266-62.3672Q67.4297-61.6641 67.5000-60.6797Q67.5703-59.6953 66.9375-58.9219L66.9375-58.9219L26.7188-9.8438Q26.3672-9.4219 25.9453-9.2109Q25.5234-9 25.1016-9L25.1016-9Q24.6094-9 24.1875-9.1758Q23.7656-9.3516 23.4141-9.7734L23.4141-9.7734L5.1328-30.1641Q4.5000-30.9375 4.5000-31.9570Q4.5000-32.9766 5.2031-33.6797L5.2031-33.6797Q5.8359-34.3828 6.7852-34.3828Q7.7344-34.3828 8.3672-33.6094L8.3672-33.6094L24.9609-15.0469L63.5625-62.1563Q64.1953-62.9297 65.1094-63Q66.0234-63.0703 66.7266-62.3672L66.7266-62.3672Z" />
      </symbol>
      <symbol id="cancel" width="16" height="16" viewBox="-1 -73 74 74" xmlns="http://www.w3.org/2000/svg">
        <path d="M36-72L36-72Q43.4531-72 49.9922-69.1875L49.9922-69.1875Q56.6016-66.3750 61.4883-61.4883Q66.3750-56.6016 69.1875-49.9922L69.1875-49.9922Q72-43.4531 72-36L72-36Q72-28.5469 69.1875-22.0078L69.1875-22.0078Q66.3750-15.3984 61.4883-10.5117Q56.6016-5.6250 49.9922-2.8125L49.9922-2.8125Q43.4531 0 36 0L36 0Q28.5469 0 22.0078-2.8125L22.0078-2.8125Q15.3984-5.6250 10.5117-10.5117Q5.6250-15.3984 2.8125-22.0078L2.8125-22.0078Q0-28.5469 0-36L0-36Q0-43.4531 2.8125-49.9922L2.8125-49.9922Q5.6250-56.6016 10.5117-61.4883Q15.3984-66.3750 22.0078-69.1875L22.0078-69.1875Q28.5469-72 36-72ZM15.3984-59.8359L15.3984-59.8359L59.8359-15.3984Q61.5938-17.4375 63-19.8281L63-19.8281Q64.4766-22.2188 65.4609-24.8203Q66.4453-27.4219 66.9375-30.2344L66.9375-30.2344Q67.5000-33.0469 67.5000-36L67.5000-36Q67.5000-42.5391 65.0391-48.2344L65.0391-48.2344Q62.5781-54 58.2891-58.2891Q54-62.5781 48.2344-65.0391L48.2344-65.0391Q42.5391-67.5000 36-67.5000L36-67.5000Q33.0469-67.5000 30.2344-66.9375L30.2344-66.9375Q27.4219-66.4453 24.8203-65.4609Q22.2188-64.4766 19.8281-63L19.8281-63Q17.4375-61.5938 15.3984-59.8359L15.3984-59.8359ZM12.1641-56.6016L12.1641-56.6016Q10.4063-54.5625 9-52.1719L9-52.1719Q7.5234-49.7813 6.5391-47.1797Q5.5547-44.5781 5.0625-41.7656L5.0625-41.7656Q4.5000-38.9531 4.5000-36L4.5000-36Q4.5000-29.4609 6.9609-23.7656L6.9609-23.7656Q9.4219-18 13.7109-13.7109Q18-9.4219 23.7656-6.9609L23.7656-6.9609Q29.4609-4.5000 36-4.5000L36-4.5000Q38.9531-4.5000 41.7656-5.0625L41.7656-5.0625Q44.5781-5.5547 47.1797-6.5391Q49.7813-7.5234 52.1719-9L52.1719-9Q54.5625-10.4063 56.6016-12.1641L56.6016-12.1641L12.1641-56.6016Z"/>
      </symbol>
      <symbol id="edit" width="16" height="16" viewBox="4 -69 65 65" xmlns="http://www.w3.org/2000/svg">
        <path d="M4.5000-4.5000L4.5000-4.5000L4.5000-26.7891L42.6094-64.8984Q45.2813-67.5000 49.0078-67.5000Q52.7344-67.5000 55.3359-64.8984L55.3359-64.8984L64.8281-55.3359Q67.5000-52.7344 67.5000-49.0078Q67.5000-45.2813 64.8281-42.6094L64.8281-42.6094L26.7188-4.5000L4.5000-4.5000ZM24.8906-9L24.8906-9L48.4453-32.5547L32.5547-48.4453L9-24.8906L9-9L24.8906-9ZM35.7188-51.6094L35.7188-51.6094L51.6094-35.7188L61.6641-45.8438Q63-47.1094 63-48.9727Q63-50.8359 61.6641-52.1719L61.6641-52.1719L52.1719-61.6641Q50.8359-63 48.9727-63Q47.1094-63 45.7734-61.6641L45.7734-61.6641L35.7188-51.6094ZM65.1797-9L42.6797-9Q41.7656-9 41.0977-8.3320Q40.4297-7.6641 40.4297-6.7500L40.4297-6.7500Q40.4297-5.8359 41.0977-5.1680Q41.7656-4.5000 42.6797-4.5000L42.6797-4.5000L65.1797-4.5000Q66.0938-4.5000 66.7617-5.1680Q67.4297-5.8359 67.4297-6.7500L67.4297-6.7500Q67.4297-7.6641 66.7617-8.3320Q66.0938-9 65.1797-9L65.1797-9Z" />
      </symbol>
      <symbol id="remove" width="16" height="16" viewBox="4 -69 65 65" xmlns="http://www.w3.org/2000/svg">
        <path d="M8.3672-66.8672L8.3672-66.8672Q7.6641-67.5000 6.7500-67.5000Q5.8359-67.5000 5.1328-66.8672L5.1328-66.8672Q4.5000-66.1641 4.5000-65.2500Q4.5000-64.3359 5.1328-63.6328L5.1328-63.6328L32.8359-36L5.1328-8.3672Q4.5000-7.6641 4.5000-6.7500Q4.5000-5.8359 5.1328-5.2031L5.1328-5.2031Q5.8359-4.5000 6.7500-4.5000Q7.6641-4.5000 8.3672-5.2031L8.3672-5.2031L36-32.8359L63.6328-5.2031Q64.3359-4.5000 65.2500-4.5000Q66.1641-4.5000 66.7969-5.2031L66.7969-5.2031Q67.5000-5.8359 67.5000-6.7500Q67.5000-7.6641 66.7969-8.3672L66.7969-8.3672L39.1641-36L66.7969-63.6328Q67.5000-64.3359 67.5000-65.2500Q67.5000-66.1641 66.7969-66.8672L66.7969-66.8672Q66.1641-67.5000 65.2500-67.5000Q64.3359-67.5000 63.6328-66.8672L63.6328-66.8672L36-39.1641L8.3672-66.8672Z" />
      </symbol>
      <symbol id="loading" width="16" height="16" viewBox="4 -69 65 65" xmlns="http://www.w3.org/2000/svg">
        <path d="M4.5000-36L4.5000-36Q4.5000-42.5391 6.9609-48.2344L6.9609-48.2344Q9.4219-54 13.7109-58.2891Q18-62.5781 23.7656-65.0391L23.7656-65.0391Q29.4609-67.5000 36-67.5000L36-67.5000Q36.9141-67.5000 37.5820-66.8320Q38.2500-66.1641 38.2500-65.2500L38.2500-65.2500Q38.2500-64.3359 37.5820-63.6680Q36.9141-63 36-63L36-63Q30.3750-63 25.5234-60.8906L25.5234-60.8906Q20.6016-58.7813 16.9102-55.0898Q13.2188-51.3984 11.1094-46.4766L11.1094-46.4766Q9-41.6250 9-36L9-36Q9-30.4453 11.1094-25.5234L11.1094-25.5234Q13.2188-20.6016 16.9102-16.9102Q20.6016-13.2188 25.5234-11.1094L25.5234-11.1094Q30.3750-9 36-9L36-9Q41.6250-9 46.4766-11.1094L46.4766-11.1094Q51.3984-13.2188 55.0898-16.9102Q58.7813-20.6016 60.8906-25.5234L60.8906-25.5234Q63-30.4453 63-36L63-36Q63-41.4141 61.0313-46.1602Q59.0625-50.9063 55.6172-54.5625L55.6172-54.5625Q54.9844-55.1953 55.0195-56.1445Q55.0547-57.0938 55.7578-57.7266L55.7578-57.7266Q56.3906-58.3594 57.3398-58.3242Q58.2891-58.2891 58.9219-57.5859L58.9219-57.5859Q60.8906-55.4766 62.5078-53.0156L62.5078-53.0156Q64.0547-50.5547 65.1797-47.8125Q66.3047-45.0703 66.9375-42.1172L66.9375-42.1172Q67.5000-39.1641 67.5000-36L67.5000-36Q67.5000-29.4609 65.0391-23.7656L65.0391-23.7656Q62.5781-18 58.2891-13.7109Q54-9.4219 48.2344-6.9609L48.2344-6.9609Q42.5391-4.5000 36-4.5000L36-4.5000Q29.4609-4.5000 23.7656-6.9609L23.7656-6.9609Q18-9.4219 13.7109-13.7109Q9.4219-18 6.9609-23.7656L6.9609-23.7656Q4.5000-29.4609 4.5000-36L4.5000-36Z"/>
      </symbol>
    </defs>
  </svg>

  <div class="disabled-overlay"></div>
  <div class="list" x-data="domainAliases">
    <template x-if="!items.length">
      <div class="no-items">
        There are no domain aliases configured.
      </div>
    </template>
    <ul>
      <template x-for="(domainAlias, index) in items">
        <li
          x-bind:class="{ 'has-error': domainAlias.error }"
          x-id="['list-item']"
          x-init="focusIfNew(index)">
          <div class="list-item-wrapper">
            <input 
              x-model="domainAlias.newValue"
              x-bind:id="$id('list-item')"
              x-bind:disabled="!domainAlias.isEditing"
              x-on:keyup="resetError(index)"
              x-on:keyup.enter="saveItem(index); updateSize();"
              x-on:keyup.escape="cancelEdit(index)" />
            <div class="actions">
              <button 
                class="action"
                x-show="domainAlias.isEditing && !domainAlias.isLoading"
                x-on:click="await saveItem(index); updateSize();">
                <svg class="icon">
                  <use xlink:href="#confirm"></use>
                </svg>
              </button>
              <div class="action" x-show="domainAlias.isLoading">
                <svg class="icon icon-loading">
                  <use xlink:href="#loading"></use>
                </svg>
              </div>
              <button
                class="action"
                x-show="domainAlias.isEditing"
                x-on:click="cancelEdit(index)">
                <svg class="icon">
                  <use xlink:href="#cancel"></use>
                </svg>
              </button>
              <button
                class="action"
                x-show="!domainAlias.isEditing"
                x-bind:disabled="isSomethingElseEditing(index)"
                x-on:click="editItem(index)">
                <svg class="icon">
                  <use xlink:href="#edit"></use>
                </svg>
              </button>
              <button
                class="action destructive"
                x-show="!domainAlias.isEditing"
                x-bind:disabled="isSomethingElseEditing(index)"
                x-on:click="removeItem(index)">
                <svg class="icon">
                  <use xlink:href="#remove"></use>
                </svg>
              </button>
            </div>
          </div>
          <span class="error-text" x-show="domainAlias.error" x-html="domainAlias.error"></span>
        </li>
      </template>
    </ul>
    <button
      type="button"
      class="create-new-item"
      x-bind:disabled="isSomethingEditing"
      x-on:click="createItem">
      <span>Create new item</span>
    </button>
  </div>
  
  <script src="https://app.kontent.ai/js-api/custom-element.js"></script>
  <script type="module" src="./index.js"></script>
</body>

</html>